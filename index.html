<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Jogo de Damas divertido para toda a famÃ­lia - jogar offline na TV ou computador">
  <meta name="theme-color" content="#7c3aed">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>ğŸ® Jogo de Damas - DiversÃ£o em FamÃ­lia!</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Favicon emoji -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ®</text></svg>">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  
  <!-- Estilos -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="app-container">
    
    <!-- BotÃ£o Voltar (fixo) -->
    <button id="btn-back" class="btn-back focusable" style="display: none;" aria-label="Voltar">
      â†
    </button>
    
    <!-- ============================================ -->
    <!-- TELA: HOME (Menu Principal) -->
    <!-- ============================================ -->
    <div id="home" class="screen active">
      <header class="header">
        <h1 class="header__title">ğŸ® Jogo de Damas</h1>
        <p class="header__subtitle">DiversÃ£o para toda a famÃ­lia!</p>
      </header>
      
      <nav class="menu">
        <button id="btn-new-game" class="menu__button focusable">
          <span class="menu__button__icon">ğŸ¯</span>
          Nova Partida
        </button>
        
        <button id="btn-players" class="menu__button menu__button--secondary focusable">
          <span class="menu__button__icon">ğŸ‘¥</span>
          Jogadores
        </button>
        
        <button id="btn-ranking" class="menu__button focusable">
          <span class="menu__button__icon">ğŸ†</span>
          Ranking
        </button>
      </nav>
    </div>
    
    <!-- ============================================ -->
    <!-- TELA: MODO DE JOGO -->
    <!-- ============================================ -->
    <div id="game-mode" class="screen">
      <header class="header">
        <h1 class="header__title">ğŸ¯ Modo de Jogo</h1>
        <p class="header__subtitle">Como vocÃª quer jogar?</p>
      </header>
      
      <div class="game-mode-options">
        <button id="btn-mode-local" class="game-mode-btn focusable">
          <div class="game-mode-btn__icon">ğŸ“±</div>
          <div class="game-mode-btn__content">
            <div class="game-mode-btn__title">Mesmo Dispositivo</div>
            <div class="game-mode-btn__desc">Jogar com alguÃ©m ao seu lado, passando o controle</div>
          </div>
        </button>
        
        <button id="btn-mode-online" class="game-mode-btn focusable">
          <div class="game-mode-btn__icon">ğŸ“¶</div>
          <div class="game-mode-btn__content">
            <div class="game-mode-btn__title">Multiplayer WiFi</div>
            <div class="game-mode-btn__desc">Jogar contra alguÃ©m na mesma rede WiFi</div>
          </div>
        </button>
      </div>
    </div>
    
    <!-- ============================================ -->
    <!-- TELA: LOBBY MULTIPLAYER -->
    <!-- ============================================ -->
    <div id="multiplayer-lobby" class="screen">
      <header class="header">
        <h1 class="header__title">ğŸ“¶ Multiplayer</h1>
        <p class="header__subtitle">Conecte-se com outro jogador</p>
      </header>
      
      <div class="card lobby-container">
        <div id="lobby-content">
          <!-- Estado inicial: escolher criar ou entrar -->
          <div id="lobby-options" class="lobby-options">
            <button id="btn-create-room" class="btn btn--success btn--large btn--full focusable">
              ğŸ  Criar Sala
            </button>
            
            <div class="lobby-input-group">
              <input type="text" id="room-code-input" class="form-group__input focusable" 
                     placeholder="CÃ³digo da sala..." maxlength="6" style="text-transform: uppercase;">
              <button id="btn-join-room" class="btn btn--primary focusable">
                Entrar
              </button>
            </div>
          </div>
          
          <!-- Estado: aguardando jogador (host) -->
          <div id="lobby-waiting" style="display: none;">
            <p class="mb-md">CÃ³digo da sala:</p>
            <div id="room-code-display" class="room-code">------</div>
            
            <div class="connection-status connection-status--waiting mt-lg">
              <div class="status-dot"></div>
              <span>Aguardando jogador...</span>
            </div>
            
            <p class="mt-lg" style="font-size: 0.9rem; color: var(--color-text-muted);">
              Seu IP: <span id="host-ip">---</span>
            </p>
            
            <button id="btn-cancel-host" class="btn btn--outline btn--full mt-lg focusable">
              Cancelar
            </button>
          </div>
          
          <!-- Estado: conectando (cliente) -->
          <div id="lobby-connecting" style="display: none;">
            <div class="connection-status connection-status--waiting">
              <div class="status-dot"></div>
              <span>Conectando...</span>
            </div>
            
            <button id="btn-cancel-join" class="btn btn--outline btn--full mt-lg focusable">
              Cancelar
            </button>
          </div>
          
          <!-- Estado: conectado -->
          <div id="lobby-connected" style="display: none;">
            <div class="connection-status connection-status--connected mb-lg">
              <div class="status-dot"></div>
              <span>Conectado!</span>
            </div>
            
            <p id="opponent-name" style="font-size: 1.2rem; font-weight: 700;">Jogador conectado</p>
            
            <button id="btn-start-multiplayer" class="btn btn--success btn--large btn--full mt-lg focusable">
              ğŸ® Iniciar Partida
            </button>
          </div>
        </div>
      </div>
    </div>
    

    <!-- ============================================ -->
    <!-- TELA: JOGADORES (Lista e Gerenciamento) -->
    <!-- ============================================ -->
    <div id="players" class="screen">
      <header class="header">
        <h1 class="header__title">ğŸ‘¥ Jogadores</h1>
        <p class="header__subtitle">Gerencie os jogadores cadastrados</p>
      </header>
      
      <div class="card" style="width: 100%; max-width: 500px;">
        <div id="players-list" class="players-list">
          <!-- Lista de jogadores serÃ¡ renderizada aqui -->
        </div>
        
        <button id="btn-add-player" class="btn btn--secondary btn--full mt-lg focusable">
          â• Adicionar Jogador
        </button>
      </div>
    </div>
    
    <!-- ============================================ -->
    <!-- TELA: FORMULÃRIO DE JOGADOR -->
    <!-- ============================================ -->
    <div id="player-form" class="screen">
      <header class="header">
        <h1 id="player-form-title" class="header__title">Novo Jogador</h1>
      </header>
      
      <div class="card" style="width: 100%; max-width: 450px;">
        <div class="form-group">
          <label class="form-group__label" for="player-name">Nome do Jogador</label>
          <input 
            type="text" 
            id="player-name" 
            class="form-group__input focusable" 
            placeholder="Digite o nome..."
            maxlength="20"
            autocomplete="off"
          >
        </div>
        
        <div class="form-group">
          <label class="form-group__label">Cor do Avatar</label>
          <div id="color-picker" class="avatar-picker">
            <!-- Cores serÃ£o renderizadas aqui -->
          </div>
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
          <button id="btn-cancel-player" class="btn btn--outline focusable" style="flex: 1;">
            Cancelar
          </button>
          <button id="btn-save-player" class="btn btn--success focusable" style="flex: 1;">
            âœ“ Salvar
          </button>
        </div>
      </div>
    </div>
    
    <!-- ============================================ -->
    <!-- TELA: SELEÃ‡ÃƒO DE JOGADORES PARA PARTIDA -->
    <!-- ============================================ -->
    <div id="select-players" class="screen">
      <header class="header">
        <h1 class="header__title">ğŸ¯ Nova Partida</h1>
        <p id="selecting-for-label" class="header__subtitle">Selecione os jogadores</p>
      </header>
      
      <!-- Slots dos jogadores selecionados -->
      <div class="player-selection">
        <div class="player-slot player-slot--red">
          <div class="player-slot__label">ğŸ”´ Jogador 1</div>
          <div id="slot1-avatar" class="player-slot__avatar" style="background: #6b7280;">?</div>
          <div id="slot1-name" class="player-slot__name">Selecione...</div>
        </div>
        
        <div style="font-size: 2rem; display: flex; align-items: center;">âš”ï¸</div>
        
        <div class="player-slot player-slot--blue">
          <div class="player-slot__label">ğŸ”µ Jogador 2</div>
          <div id="slot2-avatar" class="player-slot__avatar" style="background: #6b7280;">?</div>
          <div id="slot2-name" class="player-slot__name">Selecione...</div>
        </div>
      </div>
      
      <!-- Lista de jogadores para selecionar -->
      <div class="card" style="width: 100%; max-width: 500px;">
        <div id="select-players-list" class="players-list">
          <!-- Lista de jogadores serÃ¡ renderizada aqui -->
        </div>
        
        <button id="btn-start-game" class="btn btn--success btn--large btn--full mt-lg focusable" disabled style="opacity: 0.5;">
          ğŸ® Iniciar Partida
        </button>
      </div>
    </div>
    
    <!-- ============================================ -->
    <!-- TELA: JOGO (Tabuleiro) -->
    <!-- ============================================ -->
    <div id="game" class="screen">
      <div class="game-container">
        <!-- InformaÃ§Ãµes dos Jogadores -->
        <div class="game-info">
          <div id="player1-info" class="player-info">
            <div id="player1-avatar" class="player-info__avatar">?</div>
            <div class="player-info__details">
              <div id="player1-name" class="player-info__name">Jogador 1</div>
              <div id="player1-pieces" class="player-info__pieces">12 peÃ§as</div>
            </div>
          </div>
          
          <div id="turn-indicator" class="turn-indicator">Vez de...</div>
          
          <div id="player2-info" class="player-info">
            <div id="player2-avatar" class="player-info__avatar">?</div>
            <div class="player-info__details">
              <div id="player2-name" class="player-info__name">Jogador 2</div>
              <div id="player2-pieces" class="player-info__pieces">12 peÃ§as</div>
            </div>
          </div>
        </div>
        
        <!-- Debug Log Overlay -->
        <div id="debug-log" style="position:fixed;bottom:0;left:0;width:100%;height:100px;background:rgba(0,0,0,0.8);color:#0f0;font-size:10px;overflow-y:auto;z-index:9999;pointer-events:none;padding:5px;"></div>

        <!-- Tabuleiro -->
        <div class="board-wrapper">
          <div id="game-board" class="board">
            <!-- Tabuleiro serÃ¡ renderizado pelo JavaScript -->
          </div>
        </div>
      </div>
    </div>
    
    <!-- ============================================ -->
    <!-- TELA: RANKING -->
    <!-- ============================================ -->
    <div id="ranking" class="screen">
      <header class="header">
        <h1 class="header__title">ğŸ† Ranking</h1>
        <p class="header__subtitle">Os melhores jogadores!</p>
      </header>
      
      <div class="card" style="width: 100%; max-width: 600px;">
        <div id="ranking-list" class="ranking-list">
          <!-- Ranking serÃ¡ renderizado aqui -->
        </div>
      </div>
    </div>
    
    <!-- ============================================ -->
    <!-- MODAL: FIM DE JOGO -->
    <!-- ============================================ -->
    <div id="game-over-modal" class="modal-overlay">
      <div class="modal">
        <div class="modal__icon">ğŸ†</div>
        <h2 class="modal__title">ParabÃ©ns!</h2>
        <div style="display: flex; flex-direction: column; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
          <div id="winner-avatar" class="player-slot__avatar" style="width: 100px; height: 100px; font-size: 3rem;">?</div>
          <div id="winner-name" style="font-size: 1.5rem; font-weight: 700;">Jogador</div>
          <div id="winner-pieces" class="modal__subtitle" style="margin-bottom: 0;">VitÃ³ria!</div>
        </div>
        <div class="modal__buttons">
          <button id="btn-play-again" class="btn btn--success btn--large focusable">
            ğŸ”„ Jogar Novamente
          </button>
          <button id="btn-back-home" class="btn btn--outline focusable">
            ğŸ  Menu Principal
          </button>
        </div>
      </div>
    </div>
    
    <!-- Container de Confetes -->
    <div id="confetti-container" class="confetti-container"></div>
    
  </div>
  
  <!-- Scripts -->
  <script src="js/storage.js"></script>
  <script src="js/sounds.js"></script>
  <script src="js/players.js"></script>
  <script src="js/game.js"></script>
  <script src="js/board.js"></script>
  <script src="js/multiplayer.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
